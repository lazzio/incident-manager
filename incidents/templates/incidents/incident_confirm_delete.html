{% extends 'base.html' %}
{% block title %}Delete Incident{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- En-tÃªte avec breadcrumbs -->
    <div>
        <div class="text-sm breadcrumbs">
            <ul>
                <li><a href="{% url 'dashboard' %}">Home</a></li>
                <li><a href="{% url 'incident_list' %}">Incidents</a></li>
                <li><a href="{% url 'incident_detail' incident.id %}">Incident #{{ incident.id }}</a></li>
                <li>Delete</li>
            </ul>
        </div>
        
        <h1 class="text-3xl font-bold text-error">Delete Incident</h1>
    </div>
    
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <div class="alert alert-error shadow-lg mb-6">
                <div>
                    <i class="fas fa-triangle-exclamation"></i>
                    <span>Warning! This action cannot be undone.</span>
                </div>
            </div>
            
            <h2 class="card-title text-lg">
                Are you sure you want to delete this incident?
            </h2>
            
            <div class="bg-base-200 rounded-lg p-4 my-4">
                <div class="text-xl mb-2">{{ incident.title }}</div>
                <div class="flex gap-2 mb-3">
                    {% if incident.status == 'new' %}
                        <span class="badge badge-info">New</span>
                    {% elif incident.status == 'in_progress' %}
                        <span class="badge badge-warning">In Progress</span>
                    {% elif incident.status == 'resolved' %}
                        <span class="badge badge-success">Resolved</span>
                    {% endif %}
                    
                    {% if incident.severity == 'LOW' %}
                        <span class="badge badge-ghost">Low</span>
                    {% elif incident.severity == 'MEDIUM' %}
                        <span class="badge badge-info">Medium</span>
                    {% elif incident.severity == 'HIGH' %}
                        <span class="badge badge-warning">High</span>
                    {% elif incident.severity == 'CRITICAL' %}
                        <span class="badge badge-error">Critical</span>
                    {% endif %}
                </div>
                <div class="text-sm opacity-75">{{ incident.details|truncatechars:150 }}</div>
            </div>
            
            <div class="alert alert-warning mt-4">
                <div>
                    <i class="fas fa-info-circle"></i>
                    <span>This will also delete all comments, files, and other data associated with this incident.</span>
                </div>
            </div>
            
            <div class="flex justify-end gap-2 mt-6">
                <a href="{% url 'incident_detail' incident.id %}" class="btn btn-outline">
                    Cancel
                </a>
                
                <form method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-error">
                        <i class="fas fa-trash mr-2"></i>
                        Delete Permanently
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}